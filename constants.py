import os

from dotenv import load_dotenv
from telebot.types import BotCommand
from quick_tools_config import QUICK_TOOLS_CONFIG

load_dotenv()

TELEGRAM_TOKEN = os.getenv("TELEGRAM_TOKEN")
GEMINI_API_KEY = os.getenv("GEMINI_API_KEY")
PRO_CODE = os.getenv("PRO_CODE")


MAX_MESSAGE_LENGTH = 4000

MAX_FILE_SIZE_MB = 20

DEFAULT_MODEL = "gemini-2.5-flash"

AVAILABLE_MODELS = [
    "gemini-2.5-flash",
    "gemini-2.5-pro",
    "gemini-2.5-flash-lite-preview-06-17",
    "gemini-2.0-flash",
]


MODEL_ALIASES = {
    "gemini-2.5-flash": "2.5 Flash üöÄ",
    "gemini-2.5-pro": "2.5 Proüí°",
    "gemini-2.5-flash-lite-preview-06-17": "2.5 Flash Liteüê£",
    "gemini-2.0-flash": "2.0 Flash‚ùì",
}


def get_model_alias(full_name, default="–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ"):
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Å–µ–≤–¥–æ–Ω–∏–º –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –º–æ–¥–µ–ª–∏."""
    return MODEL_ALIASES.get(full_name, default)


COMMAND_LIST = [
    BotCommand("/start", "üöÄ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ / –ù–∞—á–∞—Ç—å —á–∞—Ç"),
    BotCommand("/generate", "üñºÔ∏è –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä. /generate –∫–æ—Ç)"),
    BotCommand("/help", "‚ÑπÔ∏è –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –±–æ—Ç–∞"),
]


for command_name, config in QUICK_TOOLS_CONFIG.items():
    COMMAND_LIST.append(BotCommand(f"/{command_name}", config["description"]))


GREETING_MESSAGE_TEMPLATE = """
üëã –ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –Ω–∞ –±–∞–∑–µ Google Gemini.

–Ø –ø–æ–º–Ω—é –Ω–∞—à —Ä–∞–∑–≥–æ–≤–æ—Ä (–∫–æ–Ω—Ç–µ–∫—Å—Ç), –º–æ–≥—É —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏, –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ Google.

–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:
üß† –ú–æ–¥–µ–ª—å: *{model_name}*
‚úçÔ∏è –†–µ–∂–∏–º –æ—Ç–ø—Ä–∞–≤–∫–∏: *{send_mode}*
üîé –ü–æ–∏—Å–∫ Google: *{search_status}*

–ß—Ç–æ —è —É–º–µ—é:
üí¨ *–ü–æ–º–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç:* –Ø —É—á–∏—Ç—ã–≤–∞—é –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–∏–∞–ª–æ–≥–µ. –ù–∞–∂–º–∏—Ç–µ "–ù–æ–≤—ã–π —á–∞—Ç", —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞.
üìÑ *–†–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏:* –û—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ —Ñ–æ—Ç–æ (—è –µ–≥–æ –æ–ø–∏—à—É –∏–ª–∏ —É—á—Ç—É) –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç (PDF, TXT, –∫–æ–¥ –∏ –¥—Ä. –§–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞ –∏ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ (–≤ –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ) –∏–ª–∏ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å—ë" (–≤ –†—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ).
üñºÔ∏è *–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:* `/generate <–≤–∞—à –∑–∞–ø—Ä–æ—Å>` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/generate orange cat`). –≠—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –Ω–µ –≤–ª–∏—è—é—â–∞—è –Ω–∞ —á–∞—Ç, –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º.
‚öôÔ∏è *–í—ã–±–∏—Ä–∞—Ç—å –º–æ–¥–µ–ª—å:* –ö–Ω–æ–ø–∫–∞ "–ú–æ–¥–µ–ª—å: ..." –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏ Gemini (—Å–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç).
‚úçÔ∏è *–†–µ–∂–∏–º—ã –æ—Ç–ø—Ä–∞–≤–∫–∏:*
    ‚Ä¢ *{send_mode_immediate}*: –û—Ç–ø—Ä–∞–≤–ª—è—é –≤–∞—à —Ç–µ–∫—Å—Ç/—Ñ–æ—Ç–æ/—Ñ–∞–π–ª *—Å—Ä–∞–∑—É* –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è. –§–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –∑–∞–ø—Ä–æ—Å—É.
    ‚Ä¢ *{send_mode_manual}*: –ù–∞–∫–∞–ø–ª–∏–≤–∞—é –≤–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è/—Ñ–æ—Ç–æ/—Ñ–∞–π–ª—ã –≤ –±—É—Ñ–µ—Ä. –£–¥–æ–±–Ω–æ, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å *–æ–¥–∏–Ω –±–æ–ª—å—à–æ–π –∑–∞–ø—Ä–æ—Å* –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Å—Ç–µ–π –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç. –ù–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å—ë", —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±—É—Ñ–µ—Ä.
üîé *–ò—Å–∫–∞—Ç—å –≤ Google:* –ö–Ω–æ–ø–∫–∞ "–ü–æ–∏—Å–∫: ..." –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –ø–æ–∏—Å–∫ –¥–ª—è –±–æ–ª–µ–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –∏ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.
üíæ *–°–∫–∞—á–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã:*
    ‚Ä¢ –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å .mdüìÑ": –ü–æ–ª—É—á–∏—Ç—å *–ø–æ—Å–ª–µ–¥–Ω–∏–π* –æ—Ç–≤–µ—Ç –±–æ—Ç–∞ –≤ –≤–∏–¥–µ Markdown-—Ñ–∞–π–ª–∞ (—Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º).
    ‚Ä¢ –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –±—ã–ª —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–º –∏ —Ä–∞–∑–±–∏—Ç –Ω–∞ —á–∞—Å—Ç–∏, –ø–æ—è–≤–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞ "–°–∫–∞—á–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ .txt" –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

üí° *–ü–æ–¥—Å–∫–∞–∑–∫–∞:* –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–π.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ! üëá
"""

SEND_MODE_IMMEDIATE = "–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π ‚ö°"
SEND_MODE_MANUAL = "–†—É—á–Ω–æ–π ‚úçÔ∏è"

SUPPORTED_MIME_TYPES = {
    "application/pdf",
    "application/x-javascript",
    "text/javascript",
    "application/x-python",
    "text/x-python",
    "text/plain",
    "text/html",
    "text/css",
    "text/markdown",
    "text/csv",
    "text/xml",
    "application/xml",
    "text/rtf",
    "application/rtf",
}


HELP_TEXT_TEMPLATE = (
    "‚ÑπÔ∏è *–°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º –±–æ—Ç–∞*\n\n"
    "*–û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç:*\n"
    "- –ü—Ä–æ—Å—Ç–æ –ø–∏—à–∏—Ç–µ –º–Ω–µ, —è –ø–æ–º–Ω—é –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞—à–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞.\n"
    "- *–ù–æ–≤—ã–π —á–∞—Ç:* –ù–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥, –æ—á–∏—â–∞—è –≤–µ—Å—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Å–æ–æ–±—â–µ–Ω–∏—è, —Ñ–∞–π–ª—ã).\n"
    "- *–ú–æ–¥–µ–ª—å:* –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –ò–ò-–º–æ–¥–µ–ª—å Gemini. –°–º–µ–Ω–∞ –º–æ–¥–µ–ª–∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–æ–≤—ã–π —á–∞—Ç.\n"
    "- *–ü–æ–∏—Å–∫:* –í–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç –ø–æ–∏—Å–∫ Google –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã—Ö –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏.\n\n"
    "*–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏:*\n"
    "- –û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Ñ–æ—Ç–æ (—è –æ–ø–∏—à—É –∏–ª–∏ —É—á—Ç—É) –∏–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (PDF, TXT, –∫–æ–¥ –∏ –¥—Ä., –¥–æ {MAX_FILE_SIZE_MB} –ú–ë).\n"
    "- –§–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç *—Ç–µ–∫—É—â–µ–≥–æ —á–∞—Ç–∞* –¥–æ –µ–≥–æ –æ—á–∏—Å—Ç–∫–∏ ('–ù–æ–≤—ã–π —á–∞—Ç').\n"
    "- *–í –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–º —Ä–µ–∂–∏–º–µ:* –§–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∫ –≤–∞—à–µ–º—É *—Å–ª–µ–¥—É—é—â–µ–º—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É* –∑–∞–ø—Ä–æ—Å—É.\n"
    "- *–í –†—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ:* –§–∞–π–ª—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –±—É—Ñ–µ—Ä –≤–º–µ—Å—Ç–µ —Å —Ç–µ–∫—Å—Ç–æ–º/—Ñ–æ—Ç–æ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤—Å–µ –≤–º–µ—Å—Ç–µ –ø–æ –∫–Ω–æ–ø–∫–µ '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å—ë'.\n\n"
    "*–†–µ–∂–∏–º—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ (–∫–Ω–æ–ø–∫–∞ '–†–µ–∂–∏–º:'):*\n"
    "- *{SEND_MODE_IMMEDIATE}:* –í–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ/—Ñ–æ—Ç–æ/—Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è *—Å—Ä–∞–∑—É*. –£–¥–æ–±–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤.\n"
    "- *{SEND_MODE_MANUAL}:* –°–æ–æ–±—â–µ–Ω–∏—è/—Ñ–æ—Ç–æ/—Ñ–∞–π–ª—ã *–Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è* –≤ –±—É—Ñ–µ—Ä–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É –æ–ø—Ü–∏—é, —á—Ç–æ–±—ã:\n"
    "    - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è –≤ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ Telegram.\n"
    "    - –°–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ, —Ñ–∞–π–ª–æ–≤ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π –≤ *–æ–¥–∏–Ω* –∑–∞–ø—Ä–æ—Å –∫ Gemini.\n"
    "- *–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å—ë:* (–¢–æ–ª—å–∫–æ –≤ –†—É—á–Ω–æ–º —Ä–µ–∂–∏–º–µ) –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±—É—Ñ–µ—Ä–∞ –≤ Gemini.\n\n"
    "*–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤:*\n"
    "- *–°–∫–∞—á–∞—Ç—å .md:* (–ö–Ω–æ–ø–∫–∞ –Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ) –°–∫–∞—á–∞—Ç—å *–ø–æ—Å–ª–µ–¥–Ω–∏–π* –æ—Ç–≤–µ—Ç –±–æ—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown (—Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —Å–ø–∏—Å–∫–æ–≤ –∏ —Ç.–¥.).\n"
    "- *–°–∫–∞—á–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ .txt:* (–ö–Ω–æ–ø–∫–∞ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –±—ã–ª —Ä–∞–∑–±–∏—Ç) –°–∫–∞—á–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –±–µ–∑ Markdown-—Ä–∞–∑–º–µ—Ç–∫–∏.\n\n"
    "*–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:*\n"
    "- `/generate <–∑–∞–ø—Ä–æ—Å>`: –°–æ–∑–¥–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –≤–∞—à–µ–º—É –æ–ø–∏—Å–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/generate space dog`). –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç. –õ—É—á—à–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º\n\n"
    "*–ë—ã—Å—Ç—Ä—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–ö–æ–º–∞–Ω–¥—ã):*\n"
    "- –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç *–æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ* –∑–∞–¥–∞—á–∏ –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞—à–µ–≥–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —á–∞—Ç–∞.\n"
)
